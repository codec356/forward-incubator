## Таблицы
### trans_external (платежи)
| Столбец | Описание |
| --- | --- |
|ID_TRANS|Уникальный код платежа|
|ID_CONTRACT|Код контракта|
|ID_TRANS_TYPE|Уникальный код типа проводки.|
|ID_SOURCE|Уникальный код источника платежа|
|F_SUM||
|V_STATUS|Статус: A - активный, D - удалён|
|ID_REPPERIOD_CREATION|Уникальный код отчётного периода создания платежа|
|ID_REPPERIOD_DELETION|Уникальный код отчётного периода удаления платежа|
|ID_MANAGER|Код оператора, внёсшего платёж|
|ID_MANAGER_DELETE|Код оператора, удалившего платёж|
|DT_EVENT|Дата фактического поступления платежа в систему|

### fw_contracts (контракты)
| Столбец | Описание |
| --- | --- |
|ID_CONTRACT_INST|Идентификатор контракта|
|DT_STOP|Дата конца действия записи|
|DT_START|Дата начала действия записи|
|ID_REC|Идентификатор записи|
|ID_CLIENT_INST|Идентификатор клиента|
|ID_CURRENCY||
|V_STATUS|Статус А активен, B заблокирован, С расторжен, D удален|
|DT_REG_EVENT|Дата регистрации|
|V_DESCRIPTION|Описание контракта|
|ID_DEPARTMENT|Код департамента из миграционной таблицы MIGR_DEPARTMENTS|
|ID_CATEGORY|Код котегории контракта|
|V_EXT_IDENT|Внешний идентификатор контракта|

### fw_departments (департаменты)
| Столбец | Описание |
| --- | --- |
|ID_DEPARTMENT|Уникальный код департамента|
|ID_PARENT|Ссылка на код, являющийся родителем|
|V_NAME|Уникальное наменование|
|B_DELETED||

### fw_identifiers (идентификаторы услуг)
| Столбец | Описание |
| --- | --- |
|ID_IDENTIFIER|Уникальный ключ идентификатора|
|ID_SERVICE_IDENTIFIER|Первичный ключ|
|V_VALUE|Значение идентификатора ( например телефонный номер или IP адресс)|
|V_STATUS|Статус идентификатор W - в режиме ожидания (в отстойнике) N - новый U - используется R - зарезервирован|
|V_PASS|Поле для пароля ассоциируемого с данным идентификатором.|
|B_DELETED|Признак удалённости|
|V_EXT_IDENT|Внешний идентификатор для внешних систем|

### fw_service_identifier (типы идентификаторов услуг)
Таблица нужна только для выполнения задачи 4.1
| Столбец | Описание |
| --- | --- |
|ID_SERVICE_IDENTIFIER|Первичный ключ|
|V_NAME|Название|
|V_DESCR|Описание|
|V_MNEMONIC|Мнемоника котрую будет использовать загрузчик для распознования типа идентификатора указанного в файле статистики|
|B_DELETED|Признак удалёной записи|

### fw_service_identifiers (привязка идентификаторов услуг к услугам)
Таблица нужна только для выполнения задачи 4.2
| Столбец | Описание |
| --- | --- |
|ID_REC||
|ID_SERVICE_IDENTIFIER_INST|Экземпляр идентификатора услуги|
|ID_SERVICE_IDENTIFIER|Идентификатор услуги|
|DT_START|Дата начала действия идентификатора|
|DT_UPDATED|Дата последней модификации конкретной строчки|
|DT_STOP|Дата окончания действия идентификатора|
|ID_SERVICE_INST|Идентификатор сущности услуги|
|B_DELETED|Признак удалёной записи|
|ID_MANAGER|Идентификатор менаджера  или оператора производившего изменения|
|ID_IDENTIFIER|Уникальный ключ идентификатора|
|V_STATUS||

## Задачи

1. Поставить себе на компьютер/ноутбуе клиент Оракл
2. Поставить себе на компьютер/ноутбук PL/SQL Developer (не зеленый)
3. Написать процедуру, которая примет на вход две даты ("дата с" и "дата по") и вернет курсор, содержащий отчет по платежам за переданные даты. Курсор должен содержать следующие поля: номер контракта, департамент контракта, сумму платежей на этом контракте за указанный период, сумму последнего платежа на этом контракте в указанном периоде. Примеры такой процедуры в файликах "Лекция 3 (dwr)" и "Лекция 3 (case и dwr)". 
4. Написать процедуру, которая будет менять тип идентификаторов в указанном диапазоне. Например, сменить тип идентификатора с "Телефонный номер" на "IP - телефон" для номеров в диапазоне с 79870000 по 79870010. На вход процедура должна принимать 4 параметра: начало диапазона, конец диапазона, исходный тип идентификатора, новый тип идентификатора. Тип идентификатора - это поле fw_identifiers.id_service_identifier. 
    2. Если это покажется слишком просто и неинтересно - сделайте так, чтобы процедура могла принимать на вход название типа идентификатора, т.е. поле fw_service_identifier.v_name
    1. Если и это слишком просто - разберитесь с таблицей fw_service_identifiers, которая хранит привязки идентификаторов к экземплярам услуг. В этой таблице тоже нужно сменить тип идентификатора. Но, если идентификатор, который вас просят поменять, сейчас привязан к услуге, то менять его нельзя. В этом случае надо вывести ошибку. 


