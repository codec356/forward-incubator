# Описание таблиц

### incb_commutator_type - Типы коммутаторов
| Столбец | Описание |
| --- | --- |
|ID_COMMUTATOR_TYPE|Код типа коммутатора|
|V_VENDOR|Производитель|
|V_MODEL|Модель|
|N_PORT|Количество портов|
|V_DESCRIPTION|Описание|
|B_DELETED|Признак удалённости записи|
|V_PREFIX_MAC|Префикс для MAC-адреса|

### incb_commutator - Справочник коммутаторов
| Столбец | Описание |
| --- | --- |
|ID_COMMUTATOR|Уникальный код коммутатора|
|IP_ADDRESS|IP коммутатора|
|ID_COMMUTATOR_TYPE|Тип коммутатора|
|V_DESCRIPTION|Описание коммутатора|
|B_DELETED|Признак удалённости записи|
|V_MAC_ADDRESS|MAC адрес|
|V_COMMUNITY_READ|Доступ на чтение|
|V_COMMUNITY_WRITE|Доступ на запись|
|REMOTE_ID|Идентификатор коммутатора во внешней системе|
|B_NEED_CONVERT_HEX|Признак использования remote_id в hex|
|REMOTE_ID_HEX|Идентификатор коммутатора во внешней системе (в hex формате)|

# Задачи
1. Реализовать справочник коммутаторов. Необходимо обеспечить уникальность IP и MAC адресов. В случае, если remote_id должен использоваться в hex формате, поле REMOTE_ID_HEX становится обязательным к заполнению. Параметры доступов на чтение и запись, IP, MAC, remote_id являются обязательными для заполнения параметрами. Кроме того, необходимо проверять валидность IP. <br> _Результат_: как минимум методы getCOMMUTATOR и saveCOMMUTATOR (при создании записи использовать s_incb_commutator.nextval для кода коммутатора) для справочника с учётом бизнес-ограничений и скрипт с примерами их использования (заполнение справочника, изменение записей, удаление записей, получение записей).
2. К описанному выше справочнику реализовать функцию check_access_comm, принимающая на вход IP-адрес, V_COMMUNITY (доступ на чтение или запиь) и B_MODE_WRITE, который равен 1, если нужно проверить доступ на запись, и 0 - на чтение. check_access_comm возвращает 1, если доступ есть, и 0 в противном случае. Метод должен уметь выбрасывать исключения в случае, если коммутатора с таким IP не существует. <br> _Результат_: функция check_access_comm.
3. К описанному выше справочнику реализовать функцию get_remote_id, принимающую на вход код коммутатора и возвращающую идентификатор коммутатора во внешней системе в hex формате, если признак использования remote_id в hex = 1, и просто REMOTE_ID в противном случае. Если признак использования remote_id в hex = 1, но идентификатор коммутатора в hex формате пуст, нужно выбрасывать исключение. <br> _Результат_: функцию get_remote_id.
4. К описанному выше справочнику реализовать метод check_and_del_data. Перед этим наполнить справочник с помощью insert заранее невалидными данными с точки зрения бизнес-ограничений (записи-дубли по IP или MAC, некорректный формат IP и т.п.). Метод принимает на вход B_FORCE_DELETE и возвращает коллекцию кодов коммутаторов, помеченных для удаления или удалённых (использовать out параметр и процедуру). Процедура check_and_del_data должна найти все некорректные коды коммутаторов и вернуть их в коллекции. Если B_FORCE_DELETE = 1, то помимо нахождения некорректных записей, процедура должна удалить их вызовом метода saveCOMMUTATOR из пункта 1. <br> _Результат_: скрипт наполнение некорректными данными, процедура check_and_del_data с примером её работы.